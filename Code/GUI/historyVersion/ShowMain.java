import javafx.geometry.Insets;import javafx.geometry.Pos;import javafx.scene.Scene;import javafx.scene.control.*;import javafx.scene.image.Image;import javafx.scene.image.ImageView;import javafx.scene.layout.*;import javafx.scene.paint.Color;import javafx.scene.paint.Paint;import javafx.scene.shape.Rectangle;import javafx.scene.text.Font;import javafx.stage.Stage;import java.io.FileInputStream;import java.io.FileNotFoundException;/** * this is main page * 文件说明： * *  ------------------------------------------------------------- * |                   mainPage layout                           | * |                        gridPane                             | * |                           |                                 | * |                           |                                 | * |                      VBox | VBox                            | * |                       |       |                             | * |                   HBox        AnchorPane                    | * |                   stackPane   ScrollPane                    | * |                   ScrollPane  HBox                          | * |                                                             | * |userImage Btn  -popWindow (UserDetail.class) @YongQi         | * |menu      Btn-popWindow (Menu.class)                         | * |hist      Btn -popWindow (HistoryChat.class) @ZongShi        | * |member Btn -popWindow (InviteNewMember.class)                | * |-------------------------------------------------------------| * |menu-view all Btn -popWindow (ViewAll.class) @YongQi         | * |menu-exit     Btn -popWindow (Exit.class)                    | * |                                                             | *  ------------------------------------------------------------- * */public class ShowMain {    static Stage window;    static Scene scene;    public ShowMain(Stage window) {        this.window = window;        this.scene = scene;    }    /**     * show mainPage scene     */    public static void showMain (Scene origin) throws FileNotFoundException {        //gridPane contains two elements (VBox1, VBox2)        GridPane gridPane = new GridPane();//______________________________________________________________        //HBox user detail        HBox userDetail = new HBox(123);        userDetail.setAlignment(Pos.CENTER_LEFT);        userDetail.setMaxSize(200, 55);        userDetail.setStyle("-fx-background-color: #DCDCDC");        //user image        FileInputStream file = new FileInputStream("src/images/icon_user.png");        Image detailUserImage = new Image(file);        ImageView userImage = new ImageView(detailUserImage);//-> popWindow        userImage.setOnMouseClicked(e -> UserDetail.display("User detail", "Details about user:"));        // setting        Button menu = new Button(">");//-> popWindow        menu.setOnAction(e -> Menu.display("Menu"));        //HBox1-userDetail add elements        HBox.setMargin(userImage, new Insets(12,0,12,13)); //top,right,bottom, left        HBox.setMargin(menu, new Insets(0,10,0,0)); //top,right,bottom, left        menu.setAlignment(Pos.CENTER_RIGHT);        userDetail.getChildren().addAll(userImage, menu);//______________________________________________________________        //searching userlist        StackPane searching = new StackPane();        searching.setMaxSize(200, 40);        searching.setStyle("-fx-background-color: #EDEDED");        Rectangle rect = new Rectangle(182,25);        rect.setArcHeight(20);        rect.setArcWidth(20);        rect.setStroke(null);        rect.setFill(Color.WHITE);        TextField searchUser = new TextField();        searchUser.setMaxSize(150, 15);        searchUser.setFont(new Font("Arial", 8));        String styles1 =                "-fx-background-color: #FFFFFF;" +                        "-fx-border-color: #FFFFFF;" ;        searchUser.setStyle(styles1);        searchUser.setPromptText("Searching");        searching.getChildren().addAll(rect, searchUser);        StackPane.setMargin(rect, new Insets(7,13,8,12));//______________________________________________________________        //userlist        ScrollPane userlist = new ScrollPane();        userlist.setPrefSize(200, 305);        userlist.setBackground(new Background(new BackgroundFill(Color.LIGHTGRAY, CornerRadii.EMPTY, Insets.EMPTY)));        //item-i image        FileInputStream file3 = new FileInputStream("src/images/icon_user.png");        Image inputUserImage_i = new Image(file3);        ImageView userImage_i = new ImageView(inputUserImage_i); //item 1        HBox hBox1 = new HBox(20);        Label userName = new Label("username_i");        Label time = new Label("20/3/2"); //should use time toolkit        hBox1.getChildren().addAll(userName, time);        hBox1.setAlignment(Pos.CENTER_LEFT);        HBox hBox2 = new HBox(30);        Label lastMes = new Label("last message");        FileInputStream file4 = new FileInputStream("src/images/mute.png");        Image muteImage = new Image(file4);        ImageView imageOfMute = new ImageView(muteImage);        hBox2.getChildren().addAll(lastMes, imageOfMute);        VBox vBox1 = new VBox(5);        vBox1.getChildren().addAll(hBox1, hBox2);        HBox hBox = new HBox(5);        hBox.getChildren().addAll(userImage_i, vBox1);//______________________________________________________________        //header bar        String currentUser = "John SmithSmithSmithSmith"; //given by server        Label curUser = new Label(currentUser);        curUser.setFont(new Font("Arial", 16));//        curUser.setStyle("-fx-background-color: #000000");        curUser.setMaxWidth(200);        curUser.setMaxHeight(20);        Button histChat = new Button("histChat"); //button histChat//-> popWindow        histChat.setOnAction(e -> {            try {                HistoryChat.display("");            } catch (FileNotFoundException ex) {                ex.printStackTrace();            }        });        Button mem = new Button("+"); //button group//-> popWindow        mem.setOnAction(e -> {            InviteNewMember.display("");        });        HBox hBox3 = new HBox(10);        hBox3.getChildren().addAll(histChat, mem);        AnchorPane headerBar = new AnchorPane();        headerBar.setStyle("-fx-background-color: #EDEDED");        headerBar.setMaxSize(400, 55);        AnchorPane.setLeftAnchor(curUser, 15.0);        AnchorPane.setTopAnchor(curUser, 19.0);        AnchorPane.setBottomAnchor(curUser, 19.0);        AnchorPane.setRightAnchor(hBox3, 15.0);        AnchorPane.setTopAnchor(hBox3, 16.0);        headerBar.getChildren().addAll(curUser, hBox3);//______________________________________________________________        //chatting part        ScrollPane chatting = new ScrollPane();        chatting.hbarPolicyProperty().setValue(ScrollPane.ScrollBarPolicy.NEVER);        chatting.vbarPolicyProperty().setValue(ScrollPane.ScrollBarPolicy.NEVER);//        chatting.setBackground(new Background(new BackgroundFill(Color.LIGHTYELLOW, CornerRadii.EMPTY, Insets.EMPTY)));        //HBox-other"s bubble--------------------------        HBox bubbleOther = new HBox(15); //chatBubble has two elements: image & message//        bubbleOther.setBackground(new Background(new BackgroundFill(Color.LIGHTGRAY, CornerRadii.EMPTY, Insets.EMPTY)));        FileInputStream file6 = new FileInputStream("src/images/icon_user copy.png");        Image inputOtherImage_i = new Image(file6);        ImageView otherImage_i = new ImageView(inputOtherImage_i); //item 1        StackPane areaOther = new StackPane();        areaOther.setMaxWidth(200);        areaOther.setBackground(new Background(new BackgroundFill(Color.WHITE, new CornerRadii(10), new Insets(0,0,0,0))));        Label textAreaOther = new Label(); //bubble        textAreaOther.setWrapText(true);        textAreaOther.setMaxWidth(200);        textAreaOther.setText("Hello!");        StackPane.setMargin(textAreaOther, new Insets(5, 10,5,10));        areaOther.getChildren().add(textAreaOther);        bubbleOther.getChildren().addAll(otherImage_i, areaOther);        bubbleOther.setAlignment(Pos.CENTER_LEFT);//        HBox.setMargin(otherImage_i, new Insets(10, 0, 10, 10)); //top,right,bottom, left        //other"s bubble--------------------------^        //HBox-my bubble--------------------------        HBox bubbleMine = new HBox(15);        bubbleMine.setMaxWidth(400);//        bubbleMine.setBackground(new Background(new BackgroundFill(Color.LIGHTGRAY, CornerRadii.EMPTY, Insets.EMPTY)));        FileInputStream file5 = new FileInputStream("src/images/icon_user.png");        Image inputUserIm = new Image(file5);        ImageView userIm = new ImageView(inputUserIm);        StackPane areaMine = new StackPane();        areaMine.setMaxWidth(200);        areaMine.setBackground(new Background(new BackgroundFill(Color.LIGHTYELLOW, new CornerRadii(10), new Insets(0,0,0,0))));        Label textAreaMine = new Label(); //bubble        textAreaMine.setWrapText(true);        textAreaMine.setMaxWidth(200);        textAreaMine.setText("Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!Hello!");        StackPane.setMargin(textAreaMine, new Insets(5, 10,5,10));        areaMine.getChildren().add(textAreaMine);        bubbleMine.getChildren().addAll(areaMine, userIm);        bubbleMine.setAlignment(Pos.CENTER_RIGHT);//        HBox.setMargin(userIm, new Insets(0, 10, 0, 0)); //top,right,bottom, left        //my bubble--------------------------^        //--------------------------------chat bubble over--------------------------------------------        VBox bubbles = new VBox(10); //on the top of chatting        bubbles.getChildren().addAll(bubbleOther, bubbleMine);        VBox.setMargin(bubbleOther, new Insets(10,125,0,15)); //top,right,bottom, left        VBox.setMargin(bubbleMine, new Insets(0, 10, 0, 125)); //top,right,bottom, left        VBox.setVgrow(bubbleOther, Priority.ALWAYS);        VBox.setVgrow(bubbleMine, Priority.ALWAYS);        chatting.setContent(bubbles);        chatting.setPrefSize(400,290);//______________________________________________________________        //HBox-typingArea        HBox typingArea = new HBox(10);        FileInputStream file9 = new FileInputStream("src/images/icon_sticker.png");        Image stickerImage = new Image(file9);        ImageView imageOfSticker = new ImageView(stickerImage);        Button sticker = new Button("", imageOfSticker);        sticker.setBackground(new Background(new BackgroundFill(null, null, null)));        TextArea input = new TextArea();        input.setWrapText(true);        input.setMaxWidth(300);        input.setMaxHeight(80);        HBox.setMargin(sticker, new Insets(10,0,10,10)); //top,right,bottom, left        HBox.setMargin(input, new Insets(10,10,10,0)); //top,right,bottom, left        typingArea.getChildren().addAll(sticker, input);//______________________________________________________________        //add all        VBox vBoxLeft = new VBox();        vBoxLeft.getChildren().addAll(userDetail, searching, userlist);        VBox vBoxRight = new VBox();        vBoxRight.getChildren().addAll(headerBar, chatting, typingArea);        GridPane.setConstraints(vBoxLeft, 0,0);        GridPane.setConstraints(vBoxRight, 1,0);        gridPane.getChildren().addAll(vBoxLeft, vBoxRight);        Scene scene = new Scene(gridPane, 600, 400);        window.setScene(scene);    }}